(function(){function h(b){this.url=[];this.init(b)}var n,r,t,g,q,A,u,v,w,z="ied3.2.0";window._refDomain;if("undefined"==typeof x)var x=1;h.prototype={init:function(b){b?g=b:g={};n=document;if(!g.statIframe&&window!=top)try{n=top.document}catch(a){}r=n.location;t=n.body;_tt=[]},PTTInfo:function(){window.PTTRun=new PTT;var b=[];b.push("pttplat="+PTTRun.plat);b.push("pttsitetype="+PTTRun.siteType);b.push("pttpagetype="+PTTRun.pageType);b.push("pttpagename="+encodeURIComponent(PTTRun.pageName));var a=
b.join("&").trimAll();console.log(b.join(";\n"));return a},run:function(){(new Date).getTime();l.init();this.url.push(this.getDomainInfo());this.url.unshift("//pingfore."+u+"/pingd?");this.url.push(this.getRefInfo(g));var b=escape(this.PTTInfo());try{navigator.cookieEnabled?this.url.push("&pvid="+l.setCookie("pgv_pvid",!0)):this.url.push("&pvid=NoCookie")}catch(a){this.url.push("&pvid=NoCookie")}this.url.push(this.getMainEnvInfo());this.url.push(this.getExtendEnvInfo());this.url.push("&vs="+z);g.userDefineVariable?
this.url.push(B.setv(g.userDefineVariable)):this.url.push(B.setv());l.setCookie("ssid");l.save();g.originalReferer&&this.url.push("&or="+g.originalReferer);(new Date).getTime();this.url.push("&ext="+b);this.url.push("&reserved1="+escape(g.reserved1Param||""));this.url.push("&rand="+Math.round(1E5*Math.random()));(b=this.getSud())&&_tt.push("su="+escape(b.substring(0,256)));this.url.push("&tt="+escape(_tt.join(";")));this.sendInfo(this.url.join(""));this.url[0]="//iedtcss.qq.com/heatmap?";this.watchHot(this.url.join(""));
g.hot&&(document.attachEvent?document.attachEvent("onclick",function(a){pgvWatchClick(a)}):document.addEventListener("click",function(a){pgvWatchClick(a)},!1));g.repeatApplay&&"true"==g.repeatApplay&&"undefined"!=typeof x&&(x=1)},getSud:function(){return g.sessionUserType?g.sessionUserType:this.getParameter(g.sudParamName||"sessionUserType",n.URL)},getDomainInfo:function(b){var a,e;q=g.virtualDomain||r.host;a=q.toLowerCase();u||(u=this.getCookieSetDomain());b&&(b=a.indexOf(":"),-1<b?a=a.substr(0,
b)+".hot"+a.substr(b):a+=".hot");return e=this.getCurrentUrl(),"dm="+a+"&url="+e},getCurrentUrl:function(){var b,a="-";if(g.virtualURL)b=g.virtualURL;else if(b=A=escape(r.pathname),""!=r.search&&(a=escape(r.search.substr(1))),g.senseParam){var e=this.getParameter(g.senseParam,n.URL);e&&(b+="_"+e)}return b+"&arg="+a},getRefInfo:function(b){var a="-",e="-",c="-",d=n.referrer,f,k=b.virtualDomain?b.virtualDomain:"-",m=b.virtualURL?b.virtualURL:"-";_refDomain=b.virtualRefDomain?b.virtualRefDomain:"";v=
b.virtualRefURL?b.virtualRefURL:"";b.statIframe||"true"==b.useCookie?(d=l.get("pgvReferrer="),f=n.URL,k=f.indexOf("?"),-1<k&&(f=f.substr(0,k)),l.set("pgvReferrer",f)):"set"==b.useCookie&&""!=_refDomain&&""!=v?(f="https:"==r.protocol?"https://":"//",f+=_refDomain+refUrl,l.set("pgvReferrer",f)):"set"!=b.useCookie||"-"==k&&"-"==m?("get"==b.useCookie&&(f=l.get("pgvReferrer="),""!=f&&(d=f)),l.set("pgvReferrer","")):(f="https:"==r.protocol?"https://":"//",f+="-"==k?q:k,f+="-"==m?A:m,l.set("pgvReferrer",
f));(f=this.getParameter(b.tagParamName||"ADTAG",n.URL))&&(a="ADTAG",e=f);f=d.indexOf("://");-1<f&&"-"==a&&(f=d.match(/(\w+):\/\/([^\:|\/]+)(\:\d*)?(.*\/)([^#|\?|\n]+)?(#.*)?(\?.*)?/i))&&(a=f[2],e=f[4]+f[5]);-1!=d.indexOf("?")&&(f=d.indexOf("?")+1,c=d.substr(f));""!=_refDomain&&"false"==b.useCookie&&(a=_refDomain);""!=v&&"false"==b.useCookie&&(e=v);_refDomain=a;v=escape(e);d=l.get("ied_rf=",!0);b=l.get("ied_qq=",!0);if("-"==d||"ADTAG"==a||"--"==d||-1==d.indexOf("ADTAG")&&"-"!=a)a+=e,128<a.length&&
(a=a.substring(0,128)),d=a,a=new Date,a.setDate(a.getDate()+1),a.setHours(a.getHours()-a.getHours()),a.setMinutes(a.getMinutes()-a.getMinutes()),a.setSeconds(a.getSeconds()-a.getSeconds()),a="ied_rf="+d+";path=/;domain="+this.getCookieSetDomain(!0)+";expires="+a.toGMTString(),n.cookie=a;return"&rdm="+_refDomain+"&rurl="+v+"&rarg="+escape(c)+"&ied_rf="+d+"&ied_qq="+b},getMainEnvInfo:function(){var b="";try{var a="-",e="-",c="-",d="-",f="-",k="-",m=0,g=navigator;self.screen&&(a=screen.width+"x"+screen.height,
e=screen.colorDepth+"-bit");g.language?c=g.language.toLowerCase():g.browserLanguage&&(c=g.browserLanguage.toLowerCase());m=g.javaEnabled()?1:0;d=g.cpuClass;f=g.platform;k=(new Date).getTimezoneOffset()/60;b="&scr="+a+"&scl="+e+"&lang="+c+"&java="+m+"&cc="+d+"&pf="+f+"&tz="+k}catch(E){}finally{return b}},getExtendEnvInfo:function(){var b="";try{var a=r.href,e="-",b=b+("&flash="+this.getFlashInfo());t.addBehavior&&(t.addBehavior("#default#homePage"),t.isHomePage(a)&&(b+="&hp=Y"));t.addBehavior&&(t.addBehavior("#default#clientCaps"),
e=t.connectionType);b+="&ct="+e}catch(c){}finally{return b}},getFlashInfo:function(){var b="-",a=navigator;try{if(a.plugins&&a.plugins.length)for(var e=0;e<a.plugins.length;e++){if(-1<a.plugins[e].name.indexOf("Shockwave Flash")){b=a.plugins[e].description.split("Shockwave Flash ")[1];break}}else if(window.ActiveXObject)for(e=12;5<=e;e--)try{if(eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+e+"');")){b=e+".0";break}}catch(c){}}catch(c){}return b},getParameter:function(b,a){return b&&a?(b=
a.match(new RegExp("(\\?|#|&)"+b+"=([^&^#]*)(#|&|$)")))?b[2]:"":""},getCookieSetDomain:function(b){var a,e,c=[];for(e=a=0;e<q.length;e++)"."==q.charAt(e)&&(c[a]=e,a++);a=c.length;-1<q.indexOf(".cn")&&a--;e="qq.com";1==a?e=q:1<a&&(e=q.substring(c[a-2]+1));if(b)switch(a){case 1:case 2:e=q;break;default:e=q.substring(c[a-3]+1)}return e},watchClick:function(b){try{var a=!0,e="",c;c=window.event?window.event.srcElement:b.target;switch(c.tagName){case "A":e="<A href="+c.href+">"+c.innerHTML+"</a>";break;
case "IMG":e="<IMG src="+c.src+">";break;case "INPUT":e="<INPUT type="+c.type+" value="+c.value+">";break;case "BUTTON":e="<BUTTON>"+c.innerText+"</BUTTON>";break;case "SELECT":e="SELECT";break;default:a=!1}if(a){var d=new h(g),f=d.getElementPos(c);if(g.coordinateId){var k=d.getElementPos(document.getElementById(g.coordinateId));f.x-=k.x}d.url.push(d.getDomainInfo(!0));d.url.push("&hottag="+escape(e));d.url.push("&hotx="+f.x);d.url.push("&hoty="+f.y);d.url.push("&rand="+Math.round(1E5*Math.random()));
d.url.unshift("//pinghot."+u+"/pingd?");d.sendInfo(d.url.join(""))}}catch(m){}},getElementPos:function(b){if(null===b.parentNode||"none"==b.style.display)return!1;var a=navigator.userAgent.toLowerCase(),e=null,c;if(b.getBoundingClientRect){var d,f,k,m;return c=b.getBoundingClientRect(),d=Math.max(document.documentElement.scrollTop,document.body.scrollTop),f=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),k=document.body.clientTop,m=document.body.clientLeft,{x:c.left+f-m,y:c.top+
d-k}}if(document.getBoxObjectFor)c=document.getBoxObjectFor(b),c=[c.x-(b.style.borderLeftWidth?Math.floor(b.style.borderLeftWidth):0),c.y-(b.style.borderTopWidth?Math.floor(b.style.borderTopWidth):0)];else{c=[b.offsetLeft,b.offsetTop];e=b.offsetParent;if(e!=b)for(;e;)c[0]+=e.offsetLeft,c[1]+=e.offsetTop,e=e.offsetParent;if(-1<a.indexOf("opera")||-1<a.indexOf("safari")&&"absolute"==b.style.position)c[0]-=document.body.offsetLeft,c[1]-=document.body.offsetTop}for(b.parentNode?e=b.parentNode:e=null;e&&
"BODY"!=e.tagName&&"HTML"!=e.tagName;)c[0]-=e.scrollLeft,c[1]-=e.scrollTop,e.parentNode?e=e.parentNode:e=null;return{x:c[0],y:c[1]}},getPos:function(b,a,e,c){a=a||document;b=b||window.event;var d={};b.pageX||b.pageY?d={x:b.pageX,y:b.pageY}:d={x:b.clientX+Math.max(a.documentElement.scrollLeft,a.body.scrollLeft)-a.body.clientLeft,y:b.clientY+Math.max(a.documentElement.scrollTop,a.body.scrollTop)-a.body.clientTop};d.x+=e||0;d.y+=c||0;return d.x=d.x-Math.max(Math.max(document.body.clientWidth,document.body.offsetWidth),
Math.max(document.body.scrollWidth,document.documentElement.scrollWidth))/2+window.screen.width/2-(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>("undefined"==typeof window.innerHeight?document.documentElement.clientHeight:window.innerHeight)?8.5:0),d},sendHeat:function(b,a){b+="&x="+a.x+"&y="+a.y+"&r3="+Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);(new Image).src=b},clickHeat:function(b,a){this.sendHeat(b,this.getPos(a))},heapClick:function(b,
a){var e=function(a,b,c){var d=function(a){a=window.event||a;target=a.srcElement||a.target;c(a,target)};a.attachEvent?a.attachEvent("on"+b,d):a.addEventListener(b,d,!1)},c=this;if(a)c.clickHeat(b,evt);else{a=document;e(a,"click",function(a){c.sendHeat(b,c.getPos(a))});var d=a.getElementsByTagName("iframe"),f=0;for(a=d.length;f<a;f++)try{(function(){var a=d[f],m=a.contentWindow.document;e(m,"click",function(d,e){e=c.getElementPos(a);c.sendHeat(b,c.getPos(d,m,e.x,e.y))})})()}catch(k){}}},watchHot:function(b){var a=
window.location,e=a.pathname,c=this;this.loadScript("//tiem-cdn.qq.com/js/mms/heatmap/"+a.hostname+".js?random="+ +new Date,function(){var a;if(window._Cnf&&window._Cnf.isValid&&(a=window._Cnf.url)){a=a.split("|");for(var f=0;f<a.length;f++)if(a[f]==e){c.heapClick(b);break}}})},loadScript:function(b,a){var e=-1==navigator.userAgent.indexOf("MSIE")?!1:!0,c=document.createElement("script"),d=document.getElementsByTagName("BODY").item(0);c.type="text/javascript";c.onerror=function(){"function"==typeof a&&
a();c=null};e?c.onreadystatechange=function(){if("complete"==this.readyState.toLowerCase()||"loaded"==this.readyState.toLowerCase())1!=this.$funExeced&&"function"==typeof a&&(this.$funExeced=!0,d.removeChild(c),a()),c=null}:c.onload=function(){"function"==typeof a&&(a(),d.removeChild(c));c=null};c.src=b;d.appendChild(c)},sendClickForPTT:function(){g.hottag&&(this.url.push(this.getDomainInfo(!0)),this.url.push("&hottag="+g.hottag),this.url.push("&hotx=9999&hoty=9999"),this.url.push("&rand="+Math.round(1E5*
Math.random())),this.url.unshift("//pinghot."+u+"/pingd?"),this.sendInfo(this.url.join("")))},hrefClick:function(b,a){g.hottag&&(this.url.push(this.getDomainInfo(!0)),this.url.push("&hottag="+escape(g.hottag)),this.url.push("&hotx=9999&hoty=9999"),this.url.push("&rand="+Math.round(1E5*Math.random())),this.url.unshift("//pinghot."+u+"/pingd?"));return this.sendInfoHref(this.url.join(""),b,a)},tgideasCount:function(b){this.sendInfo("http://pinghot.qq.com/pingd?dm=tgideas.qq.com.hot&url=/&hottag="+encodeURIComponent(b)+
"&hotx=9999&hoty=9999&rand="+Math.round(1E5*Math.random()))},sendInfo:function(b){window.navigator.sendBeacon?window.navigator.sendBeacon(b):(w=new Image(1,1),w.src=b)},sendInfoHref:function(b,a,e){var c="undefined"!=typeof e&&"undefined"!=typeof e.debug&&e.debug;if("undefined"!=typeof e&&"function"==typeof e.onBeforeReport&&!e.onBeforeReport())return!0;c&&alert("Ready to report.");w=new Image(1,1);w.src=b;w.onload=w.onerror=function(){c&&alert("Reported,url: "+b);"undefined"!=typeof e&&"function"==
typeof e.onBeforeJump?e.onBeforeJump()&&(c&&alert("Ready to jump."),location.href=a):(c&&alert("Ready to jump."),location.href=a)};return!1}};var B={vscope:{page:3,session:2,user:1},setv:function(b){var a;if(!(b&&b.name&&""!=b.name&&b.value&&""!=b.value&&b.scope)||1>b.scope||3<b.scope)a="-"==l.get("custvar=")?l.get("custvar=",!0):l.get("custvar=");else switch(a=b.name+":"+b.value,b.scope){case this.vscope.session:l.setCookie("custvar",!1,a);break;case this.vscope.user:l.setCookie("custvar",!0,a)}return"&custvar="+
a}},l={sck:[],sco:{},init:function(){var b=this.get("pgv_info=",!0);if("-"!=b)for(var b=b.split("&"),a=0;a<b.length;a++){var e=b[a].split("=");this.set(e[0],unescape(e[1]))}},get:function(b,a){var e=a?n.cookie:this.get("pgv_info=",!0),c="-",d;d=e.indexOf(b);-1<d&&(d+=b.length,b=e.indexOf(";",d),-1==b&&(b=e.length),a||(a=e.indexOf("&",d),-1<a&&(b=Math.min(b,a))),c=e.substring(d,b));return c},set:function(b,a){this.sco[b]=a;a=!1;for(var e=this.sck.length,c=0;c<e;c++)if(b==this.sck[c]){a=!0;break}a||
this.sck.push(b)},setCookie:function(b,a,e){var c=l.get(b+"=",a);"-"!=c||e?c=e?e:c:(a?c="":c="s",e=(new Date).getUTCMilliseconds(),c+=Math.round(2147483647*Math.abs(Math.random()-1))*e%1E10);return a?this.saveCookie(b+"="+c,"expires=Sun, 18 Jan 2038 00:00:00 GMT;"):this.set(b,c),c},save:function(){if(g.sessionSpan){var b=new Date;b.setTime(b.getTime()+6E4*g.sessionSpan)}for(var a="",e=this.sck.length,c=0;c<e;c++)a+=this.sck[c]+"="+this.sco[this.sck[c]]+"&";a="pgv_info="+a.substr(0,a.length-1);e="";
b&&(e="expires="+b.toGMTString());this.saveCookie(a,e)},saveCookie:function(b,a){n.cookie=b+";path=/;domain="+u+";"+a}};window.pgvMain=function(b,a){var e="";a?(e=a,z="oied3.2.0"):(e=b,z="ied3.2.0");try{1==x&&(x=2,(new h(e)).run(),PTTRun.autoSend(),(new h(e)).tgideasCount("pt."+window.location.hostname.replace(/\./g,"_")+"."+PTTRun.oldSiteType+"."+PTTRun.from))}catch(c){}};window.pgvSendClickForPTT=function(b){(new h(b)).sendClickForPTT()};window.pgvSendClick=function(b){if("undefined"!=typeof setSite&&
"undefined"!=typeof PTTSendClick){var a=b.hottag?b.hottag.split("."):0;if(b.hottag&&2<=a.length){var e=a[a.length-2].trimAll(),c=a[a.length-1].trimAll();console.log(e+":"+c)}else console.log("\u6309\u94ae\u53c2\u6570\u6709\u8bef");PTTSendClick(e,c,"\u65e7\u57cb\u70b9")}else pgvSendClickForPTT(b)};window.pgvWatchClick=function(b){(new h(b)).watchClick(b)};window.pgvHref=function(b,a,e){if("undefined"==typeof a||null==a)return(new h(b)).sendClickForPTT(),!1;"string"!=typeof a&&(a=a.getAttribute("href"));
return"undefined"!=typeof e?(new h(b)).hrefClick(a,e):(new h(b)).hrefClick(a)};window.PTT=function(){console.log("\u60a8\u6b63\u5728\u4f7f\u7528PTT\u6570\u636e\u4e0a\u62a5\u7ec4\u4ef6\uff0c\u5e2e\u52a9\u6587\u6863\u53c2\u9605:http://tgideas.qq.com/ptt/");var b=this;b.PTTDomain=document.referrer;b.getParameterByName=function(a){a=a.toLowerCase().replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(window.location.search.toLowerCase());return null==a?"":decodeURIComponent(a[1].replace(/\+/g,
" "))};b.getData=function(a){a+="=";for(var b=document.cookie.split(";"),c=0,d=b.length;c<d;c++){for(var f=b[c];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(a))return unescape(f.substring(a.length,f.length))}return!1};b.setData=function(a,b,c,d){c=c||0;d=d||"/";var e="";0!=c&&(e=new Date,e.setTime(e.getTime()+864E5*c),e="; expires="+e.toGMTString());document.cookie=a+"="+escape(b)+e+"; path="+d};b.getSession=function(a){if(window.sessionStorage)return sessionStorage.getItem(a);a+="=";
for(var b=document.cookie.split(";"),c=0,d=b.length;c<d;c++){for(var f=b[c];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(a))return unescape(f.substring(a.length,f.length))}return!1};String.prototype.trimAll=function(){return this.replace(/\s/g,"")};Number.prototype.replace=function(){return this+""};window.MossoSendClick=function(a,e,c){if("undefined"==typeof setSite)return console.log("\u60a8\u9700\u8981\u5728\u9875\u9762\u91cc\u914d\u7f6esetSite,\u5426\u5219\u5c06\u65e0\u6cd5\u91c7\u96c6\u7edf\u8ba1\u6570\u636e,\u6587\u6863\u53c2\u9605:http://tgideas.qq.com/ptt/"),
!1;a=""==a||"undefined"==typeof a?"":"_"+a.replace(/_|\./g,"*-*");e=""==e||"undefined"==typeof e?"":"_"+e.replace(/_|\./g,"*-*");c="undefined"==typeof c?"":c.replace(/_|\./g,"*-*");a=(b.plat+"."+b.siteType+"."+b.pageType+a+e+"_"+c+"."+b.from).trimAll();a=encodeURIComponent(a);b.getData("PTTdebug")&&"0"==b.getData("PTTdebug")||console.log("a:"+a);pgvSendClickForPTT({hottag:a})};window.PTTSendClick=function(a,e,c){if("undefined"==typeof setSite)return console.log("\u60a8\u9700\u8981\u5728\u9875\u9762\u91cc\u914d\u7f6esetSite,\u5426\u5219\u5c06\u65e0\u6cd5\u91c7\u96c6\u7edf\u8ba1\u6570\u636e,\u6587\u6863\u53c2\u9605:http://tgideas.qq.com/ptt/"),
!1;MossoSendClick(a,e,c);a=b.oldSiteType+"."+b.pageType+(""==a||"undefined"==typeof a?"":"."+a)+(""==e||"undefined"==typeof e?"."+b.from:"."+e);a=a.trimAll();b.getData("PTTdebug")&&"0"==b.getData("PTTdebug")||console.log("b:"+a);pgvSendClickForPTT({hottag:a})};window.PTTDebug=function(a){b.setData("PTTdebug",a)};b.unitParams=function(){var a=navigator.userAgent.toLowerCase();b.osact="undefined"==typeof setSite?!1:"os"==setSite.siteType.toLowerCase()?0:"undefined"!=typeof setSite.osact||b.getParameterByName("osact")?
1*setSite.osact||1*b.getParameterByName("osact"):0;var e;"undefined"==typeof setSite||"undefined"==typeof setSite.siteType?(console.log("\u60a8\u8fd8\u672a\u914d\u7f6esetSite.siteType\u7684\u503c,\u5c06\u65e0\u6cd5\u91c7\u96c6\u7edf\u8ba1\u6570\u636e,\u6587\u6863\u53c2\u9605:http://tgideas.qq.com/ptt/"),e=void 0):e="os"!=setSite.siteType?"1"==b.osact?setSite.siteType.toLowerCase().replace(/_|\./g,"*-*")+"_osact":setSite.siteType.toLowerCase().replace(/_|\./g,"*-*"):"os";b.siteType=e;"undefined"==
typeof setSite||"undefined"==typeof setSite.pageType?(console.log("\u60a8\u9700\u8981\u914d\u7f6esetSite.pageType\u7684\u503c,\u5426\u5219\u5c06\u65e0\u6cd5\u91c7\u96c6\u7edf\u8ba1\u6570\u636e,\u6587\u6863\u53c2\u9605:http://tgideas.qq.com/ptt/"),e=void 0):e=setSite.pageType.replace(/_|\./g,"*-*");b.pageType=e;e="undefined"!=typeof setSite&&"undefined"!=typeof setSite.pageName?setSite.pageName.replace(/_|\./g,"*-*"):void 0;b.pageName=e;e=-1!=a.indexOf("msdk")||-1!=a.indexOf("ingame")||"undefined"!=
typeof pandora?1:0;b.ingame=e;b.plat=function(){var c="",d="",e=b.getData("PTTcookiesFrom");b.ingame?(c="dcv_ingame",d=-1!=a.indexOf("msdk")?"msdk":-1!=a.indexOf("ingame")?"uaingame":"undefined"!=typeof pandora?"pandora":"ingame"):-1!=a.indexOf("qq/")?(c="dcv_qq",d="qq_article"):-1!=a.indexOf("micromessenge")?(c="dcv_wx",d="wx_article","wx"==b.getSession("channel")&&(d="wx_menu")):-1!=a.indexOf("weibo")?d="sina_weibo":c=-1<a.indexOf("iphone")||-1<a.indexOf("ipad")||-1<a.indexOf("ipod")||-1<a.indexOf("android")?
"dcv_other":"dcv_pc";e||b.setData("PTTcookiesFrom",d);return c}();b.from=function(){var a=b.getData("PTTcookiesFrom"),d=b.getSession("channel");a||"undefined"==typeof b.PTTDomain||(-1<b.PTTDomain.indexOf("baidu.com")?a="seo_baidu":-1<b.PTTDomain.indexOf("sogou.com")?a="seo_sogou":-1<b.PTTDomain.indexOf("sm.cn")?a="seo_sm":-1<b.PTTDomain.indexOf("so.com")?a="seo_360":-1<b.PTTDomain.indexOf("bing.com")?a="seo_bing":-1<b.PTTDomain.indexOf("google.com")&&(a="seo_google"));if(b.getParameterByName("adtag")){for(var a=
[],e=b.getParameterByName("adtag").split("."),k=0,m=e.length;k<m;k++)3>k&&a.push(e[k]);a="adtag_"+a.join("_");b.setData("PTTcookiesFrom",a)}d&&-1!=d.indexOf("seo")&&(a=d);a||(a="other");b.setData("PTTcookiesFrom",a);return a}();b.oldSiteType="os"==b.siteType?"dcv_pc"==b.plat?"gwpc":"1"==b.ingame?"ingame":"gwm":b.siteType;b.oldUser=function(){var a=b.getData("PTTuserFirstTime");if(a)return a=(new Date).getTime()-a,a/=864E5,60<a?"is2MonthUser":30<a?"is1MonthUser":14<a?"is2WeekUser":"old";b.setData("PTTuserFirstTime",
(new Date).getTime(),365);return"newUsers"}();b.reach=function(){var a=b.getData("PTTweekStartTime"),d=b.getData("PTTweekPerSession"),e=b.getData("PTTperWeekNum")?b.getData("PTTperWeekNum"):0;if(a){if(d)return"";b.setData("PTTweekPerSession",(new Date).getTime());e++;b.setData("PTTperWeekNum",e,7);MossoSendClick("reach","reach"+e,"\u5468\u8bbf")}else b.setData("PTTperWeekNum",1,7),b.setData("PTTweekStartTime",(new Date).getTime(),7),MossoSendClick("reach","reach1","\u5468\u8bbf")};b.routeLine=function(){if("undefined"==
typeof setSite||"undefined"==typeof setSite.siteType)return!1;var a=b.getData("PTTrouteLine")?b.getData("PTTrouteLine")+"_":"";if(7>=a.split("_").length){var d="os"!=setSite.siteType?b.siteType.split("_")[0]:b.pageType,a=a+d;b.setData("PTTrouteLine",a);MossoSendClick("route",a,"\u8def\u5f84")}else return""};b.getAv=function(){var a=b.getData("PTTosav"),d=b.getData("PTTav");if(-1!=b.siteType.indexOf("os")||-1!=b.siteType.indexOf("_osact")){if(a)return"";b.setData("PTTosav","osav",365);MossoSendClick("osav",
"","\u5b98\u7f51\u5386\u603b")}else{if(d)return"";b.setData("PTTav","actav",365,location.pathname.substring(0,location.pathname.lastIndexOf("/")+1));MossoSendClick("actav","","\u4e13\u9898\u5386\u603b")}};b.PTTSystem=function(){var b=navigator.platform.toLowerCase();return-1!=a.indexOf("android")?"android":-1!=a.indexOf("iphone")?"iphone":-1!=a.indexOf("ipad")?"ipad":-1!=a.indexOf("ipod")?"ipod":"win32"==b||"windows"==b?"windows":"mac68k"==b||"macppc"==b||"macintosh"==b||"macIntel"==b?"mac":"x11"==
b?"unix":"other"}();b.PTTSystemVer=function(){var c=b.PTTSystem,d;switch(c){case "android":d=-1!=a.indexOf("android/")?a.substr(a.indexOf("android")+8,a.indexOf(" ",a.indexOf("android"))-a.indexOf("android")-8).split(" ")[0]:a.substr(a.indexOf("android")+8,a.indexOf(";",a.indexOf("android"))-a.indexOf("android")-8).split(" ")[0];break;case "iphone":d="iphone os";d=a.substr(a.indexOf(d)+10,a.indexOf(" like ",a.indexOf(d))-a.indexOf(d)-10);break;case "windows":d=-1<a.indexOf("windows nt 5.0")||-1<a.indexOf("windows 2000")?
"win2000":-1<a.indexOf("windows nt 5.1")||-1<a.indexOf("windows xp")?"winXP":-1<a.indexOf("windows nt 5.2")||-1<a.indexOf("windows 2003")?"win2003":-1<a.indexOf("windows nt 6.0")||-1<a.indexOf("windows vista")?"winVista":-1<a.indexOf("windows nt 6.1")||-1<a.indexOf("windows 7")?"win7":-1<a.indexOf("windows nt 6.2")||-1<a.indexOf("windows 8")?"win8":-1<a.indexOf("windows nt 10")||-1<a.indexOf("windows 10")?"win10":"other";break;case "ipad":d=a.substr(a.indexOf("cpu os")+7,a.indexOf(" like ",a.indexOf("cpu os"))-
a.indexOf("cpu os")-7);break;case "mac":d=a.substr(a.indexOf("intel mac os x")+15,a.indexOf(")",a.indexOf("intel mac os x"))-a.indexOf("intel mac os x")-15);break;case "ipod":d=a.substr(a.indexOf(d)+10,a.indexOf(" like ",a.indexOf(d))-a.indexOf(d)-10);break;default:d="unknown"}MossoSendClick("systemInfo",c+d,"\u7cfb\u7edf\u4fe1\u606f")};b.detectBrowser=function(){var c,d="";c=b.PTTSystem;switch("android"==c||"iphone"==c||"ipad"==c||"ipod"==c?"mobile":"pc"){case "mobile":-1!=a.indexOf("msdk")?(c="msdk",
d=a.split("msdk/")[1]):-1!=a.indexOf("micromessenger")?(c="weixin",d=a.split("micromessenger/")[1].split(" ")[0]):-1!=a.indexOf("qq/")?(c="qq",d=a.split("qq/")[1].split(" ")[0]):-1!=a.indexOf("mqqbrowser")?(c="mqqbrowser",d=a.split("mqqbrowser/")[1].split(" ")[0]):-1!=a.indexOf("weibo")?(c="sina",d=a.split("applewebkit/")[1].split(" ")[0]):-1!=a.indexOf("ucbrowser")?(c="uc",d=a.split("ucbrowser/")[1].split(" ")[0]):-1!=a.indexOf("baiduboxapp")?(c="baidubrowser",d=a.split("baiduboxapp/")[1].split(" ")[0]):
-1!=a.indexOf("chrome")||-1!=a.indexOf("crios")?(c="chrome",-1!=a.indexOf("chrome")&&(d=a.split("chrome/")[1].split(" ")[0]),-1!=a.indexOf("crios")&&(d=a.split("crios/")[1].split(" ")[0])):-1!=a.indexOf("android")?(c="original",d=-1!=a.indexOf("applewebkit/")?a.split("applewebkit/")[1].split(" ")[0]:"0"):-1!=a.indexOf("mac os x")?(c="safari",d=a.split("applewebkit/")[1].split(" ")[0]):(c=a.trimAll(),d="unmobile");break;case "pc":/MSIE \d+\.\d+/.test(a)?(d=/MS(IE) (\d+\.\d+)/.exec(a),c=d[1],d=d[2]):
-1!=a.indexOf("qqbrowser")?(c="qqbrowser",d=a.split("qqbrowser/")[1].split(" ")[0]):/[Cc]hrome\/\d+/.test(a)?(d=/([Cc]hrome)\/(\d+)/.exec(a),c=d[1],-1!=a.indexOf("metasr")&&(c="sogou"),d=d[2]):/[Ff]irefox(\/\d+\.\d+)/.test(a)?(d=/([Ff]irefox)\/(\d+\.\d+)/.exec(a),c=d[1],d=d[2]):/[Vv]ersion\/(\d+\.\d) ([Ss]afari)/.test(a)?(d=/[Vv]ersion\/(\d+\.\d) ([Ss]afari)/.exec(a),c=d[2],d=d[1]):/[Oo]pera.+[Vv]ersion\/\d+\.\d+/.test(a)?(d=/([Oo]pera).+[Vv]ersion\/(\d+)\.\d+/.exec(a),c=d[1],d=d[2]):(c="unknown",
d="unwindow");break;default:c="unknown",d="unpc"}b.PTTBrowser=c;b.PTTBrowserVer=parseFloat(d.split(".")[0]+"."+d.split(".")[1]);MossoSendClick("browserInfo",b.PTTBrowser+b.PTTBrowserVer,"\u6d4f\u89c8\u5668\u4fe1\u606f")};b.PTTNetType=function(){var b;b=-1!=a.indexOf("nettype/")?a.substr(a.indexOf("nettype/")+8,a.indexOf(" ",a.indexOf("nettype/"))-a.indexOf("nettype/")-8):"undefined"!=typeof navigator.connection?navigator.connection.type:"unknown";MossoSendClick("netType",b,"\u7f51\u7edc\u7c7b\u578b")};
b.getPixel=function(){var c=document.documentElement.clientWidth,d=document.documentElement.clientHeight,e=window.devicePixelRatio?window.devicePixelRatio:1;if(-1!=a.indexOf("iphone")||-1!=a.indexOf("ipad")||-1!=a.indexOf("ipod")||-1!=a.indexOf("android")){var k=window.screen.width,m=c,g=window.screen.height;Math.max(k,g)==m?m=k:g*=c/k;m>g&&(k=g,g=m,m=k);c>d&&(k=d,d=c,c=k)}else m=window.screen.width,g=window.screen.height;b.PTTPixelWidth=parseInt(m*e);b.PTTPixelHeight=parseInt(g*e);b.PTTViewPixelWidth=
parseInt(c*e);b.PTTViewPixelHeight=parseInt(d*e);MossoSendClick("devicesize",b.PTTPixelWidth+"x"+b.PTTPixelHeight,"\u8bbe\u5907\u5c3a\u5bf8");MossoSendClick("viewsize",b.PTTViewPixelWidth+"x"+b.PTTViewPixelHeight,"\u53ef\u89c6\u5c3a\u5bf8")}};b.unitParams();b.autoSend=function(){-1==location.href.indexOf("qq.com/ingame")&&-1==location.href.indexOf("qq.com/g/")||MossoSendClick("mc","","\u5fae\u793e\u533a");b.routeLine();b.getAv();b.reach();b.PTTSystemVer();b.detectBrowser();b.getPixel();b.PTTNetType();
switch(b.oldUser){case "newUsers":MossoSendClick("user","newUsers","\u65b0\u7528\u6237");break;case "old":MossoSendClick("user","old","\u8001\u7528\u6237");break;case "is2WeekUser":MossoSendClick("user","2week","\u5468\u7528\u6237");break;case "is1MonthUser":MossoSendClick("user","1month","1\u6708\u7528\u6237");break;case "is2MonthUser":MossoSendClick("user","2month","2\u6708\u7528\u6237")}b.exposure(window);if("undefined"!=typeof setSite&&"undefined"!=typeof setSite.stayTime&&0==1*setSite.stayTime)return!1;
window.PTTstayTime1&&(window.PTTstayTime1.stop(),window.setStayTime5&&window.clearTimeout(window.setStayTime5));window.PTTstayTime1=stayTime({time:1E3,flag:"staytime1",start:!0});window.PTTstayTime5&&window.PTTstayTime5.stop();window.setStayTime5=window.setTimeout(function(){window.PTTstayTime1.stop();window.PTTstayTime5=stayTime({time:5E3,flag:"staytime5",start:!0})},6E3)};b.exposure=function(a){function b(b,c,e){var d=a.document.body;if(void 0===c||"function"===typeof c)e=c,c={};d=c.container||
d;c=c.offset||0;for(var p=0;p<n.length;p++)if(n[p].container===d)return n[p].isInViewport(b,c,e);return n[n.push(f(d))-1].isInViewport(b,c,e)}function c(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)}function d(a,b,c){var d;return function(){var e=this,f=arguments,p=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(e,f)},b);p&&a.apply(e,f)}}function f(b){function e(a,b,c){return{watch:function(){p.add(a,b,c)},dispose:function(){p.remove(a)}}}function f(c,d){var e,
f;if(!(r(a.document.documentElement,c)&&r(a.document.documentElement,b)&&c.offsetWidth&&c.offsetHeight))return!1;var p=c.getBoundingClientRect();if(b===a.document.body)c=-d,e=-d,f=a.document.documentElement.clientWidth+d,d=a.document.documentElement.clientHeight+d;else{var g=b.getBoundingClientRect();c=g.top-d;e=g.left-d;f=g.right+d;d=g.bottom+d}return p.right>=e&&p.left<=f&&p.bottom>=c&&p.top<=d}var p=g(),k=b===a.document.body?a:b,h=d(p.checkAll(function(a,b,c){f(a,b)&&(p.remove(a),c(a))}),15);c(k,
"scroll",h);k===a&&c(a,"resize",h);q&&m(p,b,h);setInterval(h,150);return{container:b,isInViewport:function(a,b,c){if(!c)return f(a,b);a=e(a,b,c);a.watch();return a}}}function g(){function a(a){for(var b=c.length-1;0<=b;b--)if(c[b][0]===a)return b;return-1}function b(b){return-1!==a(b)}var c=[];return{add:function(a,d,e){b(a)||c.push([a,d,e])},remove:function(b){b=a(b);-1!==b&&c.splice(b,1)},isWatched:b,checkAll:function(a){return function(){for(var b=c.length-1;0<=b;b--)a.apply(this,c[b])}}}}function m(a,
b,c){function d(b){b=g.call([],Array.prototype.slice.call(b.addedNodes),b.target);return 0<f.call(b,a.isWatched).length}var e=new MutationObserver(function(a){!0===a.some(d)&&setTimeout(c,0)}),f=Array.prototype.filter,g=Array.prototype.concat;e.observe(b,{childList:!0,subtree:!0,attributes:!0})}function h(b){var c=[];if("function"==typeof a.document.querySelectorAll)c=Array.prototype.slice.call(a.document.querySelectorAll("["+b+"]"));else for(var d=document.getElementsByTagName("*"),e=0;e<d.length;e++){var f=
d[e];f.getAttribute(b)&&c.push(f)}return c}function l(a,b){b||(b=location.href);a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(b);return null==a?null:a[1]}var n=[],q="function"===typeof a.MutationObserver,r=a.document.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:a.document.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!1)}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;
return!1},y=document.currentScript||function(){var a=document.getElementsByTagName("script");return a[a.length-1]}(),t=l("prefix",y.src)||"",y=parseInt(l("autorun",y.src)||1),D=function(){C(t)},C=function(a){t=a||t;for(var d=h("exposure-tag"),e=0;e<d.length;e++)(function(){var a=e,b=d[a].getAttribute("exposure-tag").split(",");c(d[a],"click",function(){MossoSendClick&&MossoSendClick("hotspot",b[0],b[1])})})(),b(d[e],function(a){a=a.getAttribute("exposure-tag").split(",");MossoSendClick&&MossoSendClick("exposure",
a[0],a[1])})},u=function(){var a=[],b,d=document,e=(d.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(d.readyState);e||c(d,"DOMContentLoaded",b=function(){d.removeEventListener("DOMContentLoaded",b);for(e=1;b=a.shift();)b()});return function(b){e?setTimeout(b,0):a.push(b)}}();y?u(D):function(){window.exposure={};exposure.run=function(a){C(a)}}()};b.PTTstayTime=function(){function a(a,b){var c={};b=b||{};for(var d in a)c[d]=void 0===b[d]?a[d]:b[d];return c}var b=function(a,b){function c(d){null===
l&&(l=d);var e=d-l;e>=b&&(a(d,e),l=d);n=f(c)}b=b||16;for(var d=0,e=["ms","moz","webkit","o"],f,g,h=0;h<e.length&&!window.requestAnimationFrame;++h)f=window[e[h]+"RequestAnimationFrame"],g=window[e[h]+"CancelAnimationFrame"]||window[e[h]+"CancelRequestAnimationFrame"];f||(f=function(a,b){var c=(new Date).getTime(),e=Math.max(0,16-(c-d));b=window.setTimeout(function(){a(c+e)},e);d=c+e;return b});g||(g=function(a){clearTimeout(a)});var l=null,n=null,q={start:function(){n=f(c);return q},stop:function(){g(n);
l=n=null;return q}};return q},c={page:null,time:1E3,flag:"",start:!0};window.stayTime=function(d){d=a(c,d);var e=null,g=b(function(){if(MossoSendClick){var a;a=e;a||("mo"in window||(mo={}),mo.Slide=mo.Slide||{},mo.Slide.instances=mo.Slide.instances||[],d.page=d.page||mo.Slide.instances[0]||null,_flag=d.page&&void 0!==d.page.curPage?"page"+d.page.curPage:"single",a=d.page&&void 0!==d.page.curPage?"\u9875\u9762"+d.page.curPage:"\u6574\u4e2a\u9875\u9762",a=[d.flag,_flag,a]);MossoSendClick(a[0],a[1],
a[2])}},d.time);g.setFlag=function(a){e=a};d.start&&g.start();return g};return stayTime};b.PTTstayTime()}})();window.console=window.console||function(){var h={};h.log=h.warn=h.debug=h.info=h.error=h.time=h.dir=h.profile=h.clear=h.exception=h.trace=h.assert=function(){};return h}();